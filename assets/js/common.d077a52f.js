/*! For license information please see common.d077a52f.js.LICENSE.txt */
"use strict";(self.webpackChunkct_docs=self.webpackChunkct_docs||[]).push([[76],{130:(t,e,s)=>{s.d(e,{a:()=>c,b:()=>X,c:()=>Z,d:()=>mt,e:()=>bt,f:()=>Ot});var r=s(8431),i=globalThis,n=i.ShadowRoot&&(void 0===i.ShadyCSS||i.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,a=Symbol(),o=new WeakMap,l=class{static{(0,r.a)(this,"l$2")}constructor(t,e,s){if(this._$cssResult$=!0,s!==a)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o,e=this.t;if(n&&void 0===t){let s=void 0!==e&&1===e.length;s&&(t=o.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),s&&o.set(e,t))}return t}toString(){return this.cssText}},h=(0,r.a)((t=>new l("string"==typeof t?t:t+"",void 0,a)),"h$1"),c=(0,r.a)(((t,...e)=>{let s=1===t.length?t[0]:e.reduce(((e,s,r)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[r+1]),t[0]);return new l(s,t,a)}),"p$3"),d=(0,r.a)(((t,e)=>{if(n)t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(let s of e){let e=document.createElement("style"),r=i.litNonce;void 0!==r&&e.setAttribute("nonce",r),e.textContent=s.cssText,t.appendChild(e)}}),"d$2"),u=n?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(let s of t.cssRules)e+=s.cssText;return h(e)})(t):t,{is:p,defineProperty:f,getOwnPropertyDescriptor:g,getOwnPropertyNames:y,getOwnPropertySymbols:m,getPrototypeOf:v}=Object,w=globalThis,b=w.trustedTypes,_=b?b.emptyScript:"",$=w.reactiveElementPolyfillSupport,A=(0,r.a)(((t,e)=>t),"l$1"),S={toAttribute(t,e){switch(e){case Boolean:t=t?_:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let s=t;switch(e){case Boolean:s=null!==t;break;case Number:s=null===t?null:Number(t);break;case Object:case Array:try{s=JSON.parse(t)}catch{s=null}}return s}},x=(0,r.a)(((t,e)=>!p(t,e)),"y$2"),C={attribute:!0,type:String,converter:S,reflect:!1,hasChanged:x};null!=Symbol.metadata||(Symbol.metadata=Symbol("metadata")),null!=w.litPropertyMetadata||(w.litPropertyMetadata=new WeakMap);var k,E=class extends HTMLElement{static{(0,r.a)(this,"c")}static addInitializer(t){var e;this._$Ei(),(null!=(e=this.l)?e:this.l=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=C){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){let s=Symbol(),r=this.getPropertyDescriptor(t,s,e);void 0!==r&&f(this.prototype,t,r)}}static getPropertyDescriptor(t,e,s){var r;let{get:i,set:n}=null!=(r=g(this.prototype,t))?r:{get(){return this[e]},set(t){this[e]=t}};return{get(){return i?.call(this)},set(e){let r=i?.call(this);n.call(this,e),this.requestUpdate(t,r,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){var e;return null!=(e=this.elementProperties.get(t))?e:C}static _$Ei(){if(this.hasOwnProperty(A("elementProperties")))return;let t=v(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(A("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(A("properties"))){let t=this.properties,e=[...y(t),...m(t)];for(let s of e)this.createProperty(s,t[s])}let t=this[Symbol.metadata];if(null!==t){let e=litPropertyMetadata.get(t);if(void 0!==e)for(let[t,s]of e)this.elementProperties.set(t,s)}this._$Eh=new Map;for(let[e,s]of this.elementProperties){let t=this._$Eu(e,s);void 0!==t&&this._$Eh.set(t,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){let e=[];if(Array.isArray(t)){let s=new Set(t.flat(1/0).reverse());for(let t of s)e.unshift(u(t))}else void 0!==t&&e.push(u(t));return e}static _$Eu(t,e){let s=e.attribute;return!1===s?void 0:"string"==typeof s?s:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),null==(t=this.constructor.l)||t.forEach((t=>t(this)))}addController(t){var e,s;(null!=(e=this._$EO)?e:this._$EO=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&(null==(s=t.hostConnected)||s.call(t))}removeController(t){var e;null==(e=this._$EO)||e.delete(t)}_$E_(){let t=new Map,e=this.constructor.elementProperties;for(let s of e.keys())this.hasOwnProperty(s)&&(t.set(s,this[s]),delete this[s]);t.size>0&&(this._$Ep=t)}createRenderRoot(){var t;let e=null!=(t=this.shadowRoot)?t:this.attachShadow(this.constructor.shadowRootOptions);return d(e,this.constructor.elementStyles),e}connectedCallback(){var t;null!=this.renderRoot||(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null==(t=this._$EO)||t.forEach((t=>{var e;return null==(e=t.hostConnected)?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null==(t=this._$EO)||t.forEach((t=>{var e;return null==(e=t.hostDisconnected)?void 0:e.call(t)}))}attributeChangedCallback(t,e,s){this._$AK(t,s)}_$EC(t,e){var s;let r=this.constructor.elementProperties.get(t),i=this.constructor._$Eu(t,r);if(void 0!==i&&!0===r.reflect){let n=(void 0!==(null==(s=r.converter)?void 0:s.toAttribute)?r.converter:S).toAttribute(e,r.type);this._$Em=t,null==n?this.removeAttribute(i):this.setAttribute(i,n),this._$Em=null}}_$AK(t,e){var s;let r=this.constructor,i=r._$Eh.get(t);if(void 0!==i&&this._$Em!==i){let t=r.getPropertyOptions(i),n="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null==(s=t.converter)?void 0:s.fromAttribute)?t.converter:S;this._$Em=i,this[i]=n.fromAttribute(e,t.type),this._$Em=null}}requestUpdate(t,e,s){var r;if(void 0!==t){if(null!=s||(s=this.constructor.getPropertyOptions(t)),!(null!=(r=s.hasChanged)?r:x)(this[t],e))return;this.P(t,e,s)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,e,s){var r;this._$AL.has(t)||this._$AL.set(t,e),!0===s.reflect&&this._$Em!==t&&(null!=(r=this._$Ej)?r:this._$Ej=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}let t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(null!=this.renderRoot||(this.renderRoot=this.createRenderRoot()),this._$Ep){for(let[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}let t=this.constructor.elementProperties;if(t.size>0)for(let[e,s]of t)!0!==s.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],s)}let e=!1,s=this._$AL;try{e=this.shouldUpdate(s),e?(this.willUpdate(s),null==(t=this._$EO)||t.forEach((t=>{var e;return null==(e=t.hostUpdate)?void 0:e.call(t)})),this.update(s)):this._$EU()}catch(r){throw e=!1,this._$EU(),r}e&&this._$AE(s)}willUpdate(t){}_$AE(t){var e;null==(e=this._$EO)||e.forEach((t=>{var e;return null==(e=t.hostUpdated)?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&(this._$Ej=this._$Ej.forEach((t=>this._$EC(t,this[t])))),this._$EU()}updated(t){}firstUpdated(t){}};E.elementStyles=[],E.shadowRootOptions={mode:"open"},E[A("elementProperties")]=new Map,E[A("finalized")]=new Map,$?.({ReactiveElement:E}),(null!=(k=w.reactiveElementVersions)?k:w.reactiveElementVersions=[]).push("2.0.4");var I=globalThis,T=I.trustedTypes,P=T?T.createPolicy("lit-html",{createHTML:(0,r.a)((t=>t),"createHTML")}):void 0,O="$lit$",L=`lit$${Math.random().toFixed(9).slice(2)}$`,U="?"+L,H=`<${U}>`,B=document,M=(0,r.a)((()=>B.createComment("")),"x"),R=(0,r.a)((t=>null===t||"object"!=typeof t&&"function"!=typeof t),"H"),N=Array.isArray,j=(0,r.a)((t=>N(t)||"function"==typeof t?.[Symbol.iterator]),"Z"),D="[ \t\n\f\r]",q=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,z=/-->/g,V=/>/g,J=RegExp(`>|${D}(?:([^\\s"'>=/]+)(${D}*=${D}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),K=/'/g,F=/"/g,W=/^(?:script|style|textarea|title)$/i,Q=(0,r.a)((t=>(e,...s)=>({_$litType$:t,strings:e,values:s})),"O$1"),X=Q(1),Z=Q(2),G=Symbol.for("lit-noChange"),Y=Symbol.for("lit-nothing"),tt=new WeakMap,et=B.createTreeWalker(B,129);function st(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==P?P.createHTML(e):e}(0,r.a)(st,"z");var rt=(0,r.a)(((t,e)=>{let s,r=t.length-1,i=[],n=2===e?"<svg>":"",a=q;for(let o=0;o<r;o++){let e,r,l=t[o],h=-1,c=0;for(;c<l.length&&(a.lastIndex=c,r=a.exec(l),null!==r);)c=a.lastIndex,a===q?"!--"===r[1]?a=z:void 0!==r[1]?a=V:void 0!==r[2]?(W.test(r[2])&&(s=RegExp("</"+r[2],"g")),a=J):void 0!==r[3]&&(a=J):a===J?">"===r[0]?(a=s??q,h=-1):void 0===r[1]?h=-2:(h=a.lastIndex-r[2].length,e=r[1],a=void 0===r[3]?J:'"'===r[3]?F:K):a===F||a===K?a=J:a===z||a===V?a=q:(a=J,s=void 0);let d=a===J&&t[o+1].startsWith("/>")?" ":"";n+=a===q?l+H:h>=0?(i.push(e),l.slice(0,h)+O+l.slice(h)+L+d):l+L+(-2===h?o:d)}return[st(t,n+(t[r]||"<?>")+(2===e?"</svg>":"")),i]}),"q"),it=class t{static{(0,r.a)(this,"T")}constructor({strings:e,_$litType$:s},r){let i;this.parts=[];let n=0,a=0,o=e.length-1,l=this.parts,[h,c]=rt(e,s);if(this.el=t.createElement(h,r),et.currentNode=this.el.content,2===s){let t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(i=et.nextNode())&&l.length<o;){if(1===i.nodeType){if(i.hasAttributes())for(let t of i.getAttributeNames())if(t.endsWith(O)){let e=c[a++],s=i.getAttribute(t).split(L),r=/([.?@])?(.*)/.exec(e);l.push({type:1,index:n,name:r[2],strings:s,ctor:"."===r[1]?ct:"?"===r[1]?dt:"@"===r[1]?ut:ht}),i.removeAttribute(t)}else t.startsWith(L)&&(l.push({type:6,index:n}),i.removeAttribute(t));if(W.test(i.tagName)){let t=i.textContent.split(L),e=t.length-1;if(e>0){i.textContent=T?T.emptyScript:"";for(let s=0;s<e;s++)i.append(t[s],M()),et.nextNode(),l.push({type:2,index:++n});i.append(t[e],M())}}}else if(8===i.nodeType)if(i.data===U)l.push({type:2,index:n});else{let t=-1;for(;-1!==(t=i.data.indexOf(L,t+1));)l.push({type:7,index:n}),t+=L.length-1}n++}}static createElement(t,e){let s=B.createElement("template");return s.innerHTML=t,s}};function nt(t,e,s=t,r){var i,n,a;if(e===G)return e;let o=void 0!==r?null==(i=s._$Co)?void 0:i[r]:s._$Cl,l=R(e)?void 0:e._$litDirective$;return o?.constructor!==l&&(null==(n=o?._$AO)||n.call(o,!1),void 0===l?o=void 0:(o=new l(t),o._$AT(t,s,r)),void 0!==r?(null!=(a=s._$Co)?a:s._$Co=[])[r]=o:s._$Cl=o),void 0!==o&&(e=nt(t,o._$AS(t,e.values),o,r)),e}(0,r.a)(nt,"f$1");var at,ot=class{static{(0,r.a)(this,"G")}constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var e;let{el:{content:s},parts:r}=this._$AD,i=(null!=(e=t?.creationScope)?e:B).importNode(s,!0);et.currentNode=i;let n=et.nextNode(),a=0,o=0,l=r[0];for(;void 0!==l;){if(a===l.index){let e;2===l.type?e=new lt(n,n.nextSibling,this,t):1===l.type?e=new l.ctor(n,l.name,l.strings,this,t):6===l.type&&(e=new pt(n,this,t)),this._$AV.push(e),l=r[++o]}a!==l?.index&&(n=et.nextNode(),a++)}return et.currentNode=B,i}p(t){let e=0;for(let s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,e),e+=s.strings.length-2):s._$AI(t[e])),e++}},lt=class t{static{(0,r.a)(this,"b$1")}get _$AU(){var t,e;return null!=(e=null==(t=this._$AM)?void 0:t._$AU)?e:this._$Cv}constructor(t,e,s,r){var i;this.type=2,this._$AH=Y,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=s,this.options=r,this._$Cv=null==(i=r?.isConnected)||i}get parentNode(){let t=this._$AA.parentNode,e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=nt(this,t,e),R(t)?t===Y||null==t||""===t?(this._$AH!==Y&&this._$AR(),this._$AH=Y):t!==this._$AH&&t!==G&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):j(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==Y&&R(this._$AH)?this._$AA.nextSibling.data=t:this.T(B.createTextNode(t)),this._$AH=t}$(t){var e;let{values:s,_$litType$:r}=t,i="number"==typeof r?this._$AC(t):(void 0===r.el&&(r.el=it.createElement(st(r.h,r.h[0]),this.options)),r);if((null==(e=this._$AH)?void 0:e._$AD)===i)this._$AH.p(s);else{let t=new ot(i,this),e=t.u(this.options);t.p(s),this.T(e),this._$AH=t}}_$AC(t){let e=tt.get(t.strings);return void 0===e&&tt.set(t.strings,e=new it(t)),e}k(e){N(this._$AH)||(this._$AH=[],this._$AR());let s,r=this._$AH,i=0;for(let n of e)i===r.length?r.push(s=new t(this.S(M()),this.S(M()),this,this.options)):s=r[i],s._$AI(n),i++;i<r.length&&(this._$AR(s&&s._$AB.nextSibling,i),r.length=i)}_$AR(t=this._$AA.nextSibling,e){var s;for(null==(s=this._$AP)||s.call(this,!1,!0,e);t&&t!==this._$AB;){let e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cv=t,null==(e=this._$AP)||e.call(this,t))}},ht=class{static{(0,r.a)(this,"M")}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,s,r,i){this.type=1,this._$AH=Y,this._$AN=void 0,this.element=t,this.name=e,this._$AM=r,this.options=i,s.length>2||""!==s[0]||""!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=Y}_$AI(t,e=this,s,r){let i=this.strings,n=!1;if(void 0===i)t=nt(this,t,e,0),n=!R(t)||t!==this._$AH&&t!==G,n&&(this._$AH=t);else{let r,a,o=t;for(t=i[0],r=0;r<i.length-1;r++)a=nt(this,o[s+r],e,r),a===G&&(a=this._$AH[r]),n||(n=!R(a)||a!==this._$AH[r]),a===Y?t=Y:t!==Y&&(t+=(a??"")+i[r+1]),this._$AH[r]=a}n&&!r&&this.j(t)}j(t){t===Y?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},ct=class extends ht{static{(0,r.a)(this,"J")}constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===Y?void 0:t}},dt=class extends ht{static{(0,r.a)(this,"K")}constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==Y)}},ut=class extends ht{static{(0,r.a)(this,"Q")}constructor(t,e,s,r,i){super(t,e,s,r,i),this.type=5}_$AI(t,e=this){var s;if((t=null!=(s=nt(this,t,e,0))?s:Y)===G)return;let r=this._$AH,i=t===Y&&r!==Y||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,n=t!==Y&&(r===Y||i);i&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,s;"function"==typeof this._$AH?this._$AH.call(null!=(s=null==(e=this.options)?void 0:e.host)?s:this.element,t):this._$AH.handleEvent(t)}},pt=class{static{(0,r.a)(this,"X")}constructor(t,e,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){nt(this,t)}},ft=I.litHtmlPolyfillSupport;ft?.(it,lt),(null!=(at=I.litHtmlVersions)?at:I.litHtmlVersions=[]).push("3.1.4");var gt,yt=(0,r.a)(((t,e,s)=>{var r,i;let n=null!=(r=s?.renderBefore)?r:e,a=n._$litPart$;if(void 0===a){let t=null!=(i=s?.renderBefore)?i:null;n._$litPart$=a=new lt(e.insertBefore(M(),t),t,void 0,s??{})}return a._$AI(t),a}),"et"),mt=class extends E{static{(0,r.a)(this,"n")}constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t;let e=super.createRenderRoot();return null!=(t=this.renderOptions).renderBefore||(t.renderBefore=e.firstChild),e}update(t){let e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=yt(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null==(t=this._$Do)||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null==(t=this._$Do)||t.setConnected(!1)}render(){return G}};mt._$litElement$=!0,mt.finalized=!0,null==(gt=globalThis.litElementHydrateSupport)||gt.call(globalThis,{LitElement:mt});var vt,wt=globalThis.litElementPolyfillSupport;wt?.({LitElement:mt}),(null!=(vt=globalThis.litElementVersions)?vt:globalThis.litElementVersions=[]).push("4.0.6");var bt=(0,r.a)((t=>(e,s)=>{void 0!==s?s.addInitializer((()=>{customElements.define(t,e)})):customElements.define(t,e)}),"s"),_t=Object.defineProperty,$t=Object.defineProperties,At=Object.getOwnPropertyDescriptors,St=Object.getOwnPropertySymbols,xt=Object.prototype.hasOwnProperty,Ct=Object.prototype.propertyIsEnumerable,kt=(0,r.a)(((t,e,s)=>e in t?_t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s),"d"),Et=(0,r.a)(((t,e)=>{for(var s in e||(e={}))xt.call(e,s)&&kt(t,s,e[s]);if(St)for(var s of St(e))Ct.call(e,s)&&kt(t,s,e[s]);return t}),"l"),It=(0,r.a)(((t,e)=>$t(t,At(e))),"u"),Tt={attribute:!0,type:String,converter:S,reflect:!1,hasChanged:x},Pt=(0,r.a)(((t=Tt,e,s)=>{let{kind:r,metadata:i}=s,n=globalThis.litPropertyMetadata.get(i);if(void 0===n&&globalThis.litPropertyMetadata.set(i,n=new Map),n.set(s.name,t),"accessor"===r){let{name:r}=s;return{set(s){let i=e.get.call(this);e.set.call(this,s),this.requestUpdate(r,i,t)},init(e){return void 0!==e&&this.P(r,void 0,t),e}}}if("setter"===r){let{name:r}=s;return function(s){let i=this[r];e.call(this,s),this.requestUpdate(r,i,t)}}throw Error("Unsupported decorator location: "+r)}),"w");function Ot(t){return(e,s)=>"object"==typeof s?Pt(t,e,s):((t,e,s)=>{let r=e.hasOwnProperty(s);return e.constructor.createProperty(s,r?It(Et({},t),{wrapped:!0}):t),r?Object.getOwnPropertyDescriptor(e,s):void 0})(t,e,s)}(0,r.a)(Ot,"O")},2980:(t,e,s)=>{s.d(e,{a:()=>q,b:()=>z,c:()=>V,d:()=>J,e:()=>K,f:()=>F,g:()=>W,h:()=>Q,i:()=>Z});var r=s(8431),i=Object.create,n=Object.defineProperty,a=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,l=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,c=(0,r.a)(((t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports)),"A"),d=(0,r.a)(((t,e,s,i)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let l of o(e))!h.call(t,l)&&l!==s&&n(t,l,{get:(0,r.a)((()=>e[l]),"get"),enumerable:!(i=a(e,l))||i.enumerable});return t}),"Dt"),u=(0,r.a)(((t,e,s)=>(s=null!=t?i(l(t)):{},d(!e&&t&&t.__esModule?s:n(s,"default",{value:t,enumerable:!0}),t))),"Y"),p=c((t=>{function e(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function s(t){if("boolean"!=typeof t)throw new Error(`boolean expected, not ${t}`)}function i(t){return t instanceof Uint8Array||null!=t&&"object"==typeof t&&"Uint8Array"===t.constructor.name}function n(t,...e){if(!i(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function a(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");e(t.outputLen),e(t.blockLen)}function o(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function l(t,e){n(t);let s=e.outputLen;if(t.length<s)throw new Error(`digestInto() expects output buffer of length at least ${s}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.isBytes=i,t.number=e,t.bool=s,t.bytes=n,t.hash=a,t.exists=o,t.output=l,(0,r.a)(e,"R"),(0,r.a)(s,"me"),(0,r.a)(i,"ge"),(0,r.a)(n,"X"),(0,r.a)(a,"ye"),(0,r.a)(o,"Se"),(0,r.a)(l,"be");var h={number:e,bool:s,bytes:n,hash:a,exists:o,output:l};t.default=h})),f=c((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.add5L=t.add5H=t.add4H=t.add4L=t.add3H=t.add3L=t.rotlBL=t.rotlBH=t.rotlSL=t.rotlSH=t.rotr32L=t.rotr32H=t.rotrBL=t.rotrBH=t.rotrSL=t.rotrSH=t.shrSL=t.shrSH=t.toBig=void 0,t.fromBig=i,t.split=n,t.add=w;var e=BigInt(2**32-1),s=BigInt(32);function i(t,r=!1){return r?{h:Number(t&e),l:Number(t>>s&e)}:{h:0|Number(t>>s&e),l:0|Number(t&e)}}function n(t,e=!1){let s=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let n=0;n<t.length;n++){let{h:a,l:o}=i(t[n],e);[s[n],r[n]]=[a,o]}return[s,r]}(0,r.a)(i,"ee"),(0,r.a)(n,"Ie");var a=(0,r.a)(((t,e)=>BigInt(t>>>0)<<s|BigInt(e>>>0)),"Te");t.toBig=a;var o=(0,r.a)(((t,e,s)=>t>>>s),"we");t.shrSH=o;var l=(0,r.a)(((t,e,s)=>t<<32-s|e>>>s),"xe");t.shrSL=l;var h=(0,r.a)(((t,e,s)=>t>>>s|e<<32-s),"Ae");t.rotrSH=h;var c=(0,r.a)(((t,e,s)=>t<<32-s|e>>>s),"Oe");t.rotrSL=c;var d=(0,r.a)(((t,e,s)=>t<<64-s|e>>>s-32),"Ee");t.rotrBH=d;var u=(0,r.a)(((t,e,s)=>t>>>s-32|e<<64-s),"Pe");t.rotrBL=u;var p=(0,r.a)(((t,e)=>e),"ve");t.rotr32H=p;var f=(0,r.a)(((t,e)=>t),"Ce");t.rotr32L=f;var g=(0,r.a)(((t,e,s)=>t<<s|e>>>32-s),"_e");t.rotlSH=g;var y=(0,r.a)(((t,e,s)=>e<<s|t>>>32-s),"Ne");t.rotlSL=y;var m=(0,r.a)(((t,e,s)=>e<<s-32|t>>>64-s),"De");t.rotlBH=m;var v=(0,r.a)(((t,e,s)=>t<<s-32|e>>>64-s),"ke");function w(t,e,s,r){let i=(e>>>0)+(r>>>0);return{h:t+s+(i/2**32|0)|0,l:0|i}}t.rotlBL=v,(0,r.a)(w,"Le");var b=(0,r.a)(((t,e,s)=>(t>>>0)+(e>>>0)+(s>>>0)),"Re");t.add3L=b;var _=(0,r.a)(((t,e,s,r)=>e+s+r+(t/2**32|0)|0),"Me");t.add3H=_;var $=(0,r.a)(((t,e,s,r)=>(t>>>0)+(e>>>0)+(s>>>0)+(r>>>0)),"Be");t.add4L=$;var A=(0,r.a)(((t,e,s,r,i)=>e+s+r+i+(t/2**32|0)|0),"Ue");t.add4H=A;var S=(0,r.a)(((t,e,s,r,i)=>(t>>>0)+(e>>>0)+(s>>>0)+(r>>>0)+(i>>>0)),"ze");t.add5L=S;var x=(0,r.a)(((t,e,s,r,i,n)=>e+s+r+i+n+(t/2**32|0)|0),"He");t.add5H=x;var C={fromBig:i,split:n,toBig:a,shrSH:o,shrSL:l,rotrSH:h,rotrSL:c,rotrBH:d,rotrBL:u,rotr32H:p,rotr32L:f,rotlSH:g,rotlSL:y,rotlBH:m,rotlBL:v,add:w,add3L:b,add3H:_,add4L:$,add4H:A,add5H:x,add5L:S};t.default=C})),g=c((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0})),y=c((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=void 0,t.isBytes=i,t.byteSwap32=d,t.bytesToHex=f,t.hexToBytes=v,t.asyncLoop=b,t.utf8ToBytes=_,t.toBytes=$,t.concatBytes=A,t.checkOpts=C,t.wrapConstructor=k,t.wrapConstructorWithOpts=E,t.wrapXOFConstructorWithOpts=I,t.randomBytes=T;var e=g(),s=p();function i(t){return t instanceof Uint8Array||null!=t&&"object"==typeof t&&"Uint8Array"===t.constructor.name}(0,r.a)(i,"Rt");var n=(0,r.a)((t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),"Mt");t.u8=n;var a=(0,r.a)((t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))),"Bt");t.u32=a;var o=(0,r.a)((t=>new DataView(t.buffer,t.byteOffset,t.byteLength)),"Ut");t.createView=o;var l=(0,r.a)(((t,e)=>t<<32-e|t>>>e),"zt");t.rotr=l;var h=(0,r.a)(((t,e)=>t<<e|t>>>32-e>>>0),"Ht");t.rotl=h,t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];var c=(0,r.a)((t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255),"Ft");function d(e){for(let s=0;s<e.length;s++)e[s]=(0,t.byteSwap)(e[s])}t.byteSwap=c,t.byteSwapIfBE=t.isLE?t=>t:e=>(0,t.byteSwap)(e),(0,r.a)(d,"Wt");var u=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function f(t){(0,s.bytes)(t);let e="";for(let s=0;s<t.length;s++)e+=u[t[s]];return e}(0,r.a)(f,"$t");var y={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function m(t){return t>=y._0&&t<=y._9?t-y._0:t>=y._A&&t<=y._F?t-(y._A-10):t>=y._a&&t<=y._f?t-(y._a-10):void 0}function v(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);let e=t.length,s=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(s);for(let i=0,n=0;i<s;i++,n+=2){let e=m(t.charCodeAt(n)),s=m(t.charCodeAt(n+1));if(void 0===e||void 0===s){let e=t[n]+t[n+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+n)}r[i]=16*e+s}return r}(0,r.a)(m,"Ve"),(0,r.a)(v,"jt");var w=(0,r.a)((async()=>{}),"Jt");async function b(e,s,r){let i=Date.now();for(let n=0;n<e;n++){r(n);let e=Date.now()-i;e>=0&&e<s||(await(0,t.nextTick)(),i+=e)}}function _(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function $(t){return"string"==typeof t&&(t=_(t)),(0,s.bytes)(t),t}function A(...t){let e=0;for(let i=0;i<t.length;i++){let r=t[i];(0,s.bytes)(r),e+=r.length}let r=new Uint8Array(e);for(let s=0,i=0;s<t.length;s++){let e=t[s];r.set(e,i),i+=e.length}return r}t.nextTick=w,(0,r.a)(b,"Kt"),(0,r.a)(_,"$e"),(0,r.a)($,"U"),(0,r.a)(A,"qt");var S=class{static{(0,r.a)(this,"te")}clone(){return this._cloneInto()}};t.Hash=S;var x={}.toString;function C(t,e){if(void 0!==e&&"[object Object]"!==x.call(e))throw new Error("Options should be object or undefined");return Object.assign(t,e)}function k(t){let e=(0,r.a)((e=>t().update($(e)).digest()),"e"),s=t();return e.outputLen=s.outputLen,e.blockLen=s.blockLen,e.create=()=>t(),e}function E(t){let e=(0,r.a)(((e,s)=>t(s).update($(e)).digest()),"e"),s=t({});return e.outputLen=s.outputLen,e.blockLen=s.blockLen,e.create=e=>t(e),e}function I(t){let e=(0,r.a)(((e,s)=>t(s).update($(e)).digest()),"e"),s=t({});return e.outputLen=s.outputLen,e.blockLen=s.blockLen,e.create=e=>t(e),e}function T(t=32){if(e.crypto&&"function"==typeof e.crypto.getRandomValues)return e.crypto.getRandomValues(new Uint8Array(t));if(e.crypto&&"function"==typeof e.crypto.randomBytes)return e.crypto.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}(0,r.a)(C,"Yt"),(0,r.a)(k,"Xt"),(0,r.a)(E,"Qt"),(0,r.a)(I,"Zt"),(0,r.a)(T,"en")})),m=c((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shake256=t.shake128=t.keccak_512=t.keccak_384=t.keccak_256=t.keccak_224=t.sha3_512=t.sha3_384=t.sha3_256=t.sha3_224=t.Keccak=void 0,t.keccakP=_;var e=p(),s=f(),i=y(),n=[],a=[],o=[],l=BigInt(0),h=BigInt(1),c=BigInt(2),d=BigInt(7),u=BigInt(256),g=BigInt(113);for(let r=0,p=h,f=1,y=0;r<24;r++){[f,y]=[y,(2*f+3*y)%5],n.push(2*(5*y+f)),a.push((r+1)*(r+2)/2%64);let t=l;for(let e=0;e<7;e++)p=(p<<h^(p>>d)*g)%u,p&c&&(t^=h<<(h<<BigInt(e))-h);o.push(t)}var[m,v]=(0,s.split)(o,!0),w=(0,r.a)(((t,e,r)=>r>32?(0,s.rotlBH)(t,e,r):(0,s.rotlSH)(t,e,r)),"Je"),b=(0,r.a)(((t,e,r)=>r>32?(0,s.rotlBL)(t,e,r):(0,s.rotlSL)(t,e,r)),"Ke");function _(t,e=24){let s=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let r=0;r<10;r++)s[r]=t[r]^t[r+10]^t[r+20]^t[r+30]^t[r+40];for(let r=0;r<10;r+=2){let e=(r+8)%10,i=(r+2)%10,n=s[i],a=s[i+1],o=w(n,a,1)^s[e],l=b(n,a,1)^s[e+1];for(let s=0;s<50;s+=10)t[r+s]^=o,t[r+s+1]^=l}let e=t[2],i=t[3];for(let s=0;s<24;s++){let r=a[s],o=w(e,i,r),l=b(e,i,r),h=n[s];e=t[h],i=t[h+1],t[h]=o,t[h+1]=l}for(let r=0;r<50;r+=10){for(let e=0;e<10;e++)s[e]=t[r+e];for(let e=0;e<10;e++)t[r+e]^=~s[(e+2)%10]&s[(e+4)%10]}t[0]^=m[r],t[1]^=v[r]}s.fill(0)}(0,r.a)(_,"Xe");var $=class t extends i.Hash{static{(0,r.a)(this,"t")}constructor(t,s,r,n=!1,a=24){if(super(),this.blockLen=t,this.suffix=s,this.outputLen=r,this.enableXOF=n,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,e.number)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,i.u32)(this.state)}keccak(){i.isLE||(0,i.byteSwap32)(this.state32),_(this.state32,this.rounds),i.isLE||(0,i.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(t){(0,e.exists)(this);let{blockLen:s,state:r}=this,n=(t=(0,i.toBytes)(t)).length;for(let e=0;e<n;){let i=Math.min(s-this.pos,n-e);for(let s=0;s<i;s++)r[this.pos++]^=t[e++];this.pos===s&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:e,pos:s,blockLen:r}=this;t[s]^=e,128&e&&s===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){(0,e.exists)(this,!1),(0,e.bytes)(t),this.finish();let s=this.state,{blockLen:r}=this;for(let e=0,i=t.length;e<i;){this.posOut>=r&&this.keccak();let n=Math.min(r-this.posOut,i-e);t.set(s.subarray(this.posOut,this.posOut+n),e),this.posOut+=n,e+=n}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,e.number)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,e.output)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:s,suffix:r,outputLen:i,rounds:n,enableXOF:a}=this;return e||(e=new t(s,r,i,a,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=a,e.destroyed=this.destroyed,e}};t.Keccak=$;var A=(0,r.a)(((t,e,s)=>(0,i.wrapConstructor)((()=>new $(e,t,s)))),"T");t.sha3_224=A(6,144,28),t.sha3_256=A(6,136,32),t.sha3_384=A(6,104,48),t.sha3_512=A(6,72,64),t.keccak_224=A(1,144,28),t.keccak_256=A(1,136,32),t.keccak_384=A(1,104,48),t.keccak_512=A(1,72,64);var S=(0,r.a)(((t,e,s)=>(0,i.wrapXOFConstructorWithOpts)(((r={})=>new $(e,t,void 0===r.dkLen?s:r.dkLen,!0)))),"Qe");t.shake128=S(31,168,16),t.shake256=S(31,136,32)})),v=c(((t,e)=>{var{sha3_512:s}=m(),i=(0,r.a)(((t=4,e=Math.random)=>{let s="";for(;s.length<t;)s+=Math.floor(36*e()).toString(36);return s}),"re");function n(t){let e=BigInt(8),s=BigInt(0);for(let r of t.values()){s=(s<<e)+BigInt(r)}return s}(0,r.a)(n,"nt");var a=(0,r.a)(((t="")=>n(s(t)).toString(36).slice(1)),"rt"),o=Array.from({length:26},((t,e)=>String.fromCharCode(e+97))),l=(0,r.a)((t=>o[Math.floor(t()*o.length)]),"un"),h=(0,r.a)((({globalObj:t=(typeof global<"u"?global:typeof window<"u"?window:{}),random:e=Math.random}={})=>{let s=Object.keys(t).toString(),r=s.length?s+i(32,e):i(32,e);return a(r).substring(0,32)}),"st"),c=(0,r.a)((t=>()=>t++),"ot"),d=(0,r.a)((({random:t=Math.random,counter:e=c(Math.floor(476782367*t())),length:s=24,fingerprint:r=h({random:t})}={})=>function(){let n=l(t),o=Date.now().toString(36),h=e().toString(36),c=i(s,t);return`${n+a(`${o+c+h+r}`).substring(1,s)}`}),"it"),u=d(),p=(0,r.a)(((t,{minLength:e=2,maxLength:s=32}={})=>{let r=t.length,i=/^[a-z][0-9a-z]+$/;try{if("string"==typeof t&&r>=e&&r<=s&&i.test(t))return!0}finally{}return!1}),"fn");e.exports.getConstants=()=>({defaultLength:24,bigLength:32}),e.exports.init=d,e.exports.createId=u,e.exports.bufToBigInt=n,e.exports.createCounter=c,e.exports.createFingerprint=h,e.exports.isCuid=p})),w=c(((t,e)=>{var{createId:s,init:r,getConstants:i,isCuid:n}=v();e.exports.createId=s,e.exports.init=r,e.exports.getConstants=i,e.exports.isCuid=n})),b=u(w(),1),_=Object.keys({arabic:"ar",armenian:"am",bulgarian:"bg",danish:"dk",dutch:"nl",english:"en",finnish:"fi",french:"fr",german:"de",greek:"gr",hungarian:"hu",indian:"in",indonesian:"id",irish:"ie",italian:"it",lithuanian:"lt",nepali:"np",norwegian:"no",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"rs",slovenian:"ru",spanish:"es",swedish:"se",tamil:"ta",turkish:"tr",ukrainian:"uk",sanskrit:"sk"});Date.now().toString().slice(5);var $=BigInt(1e3),A=BigInt(1e6),S=BigInt(1e9);function x(t){return"number"==typeof t&&(t=BigInt(t)),t<$?`${t}ns`:t<A?t/$+"\u03bcs":t<S?t/A+"ms":t/S+"s"}function C(t){return{raw:Number(t),formatted:x(t)}}(0,r.a)(x,"dt"),_.join("\n - "),(0,r.a)(C,"oe");var k="2.1.4",E=k,I=u(w(),1),T="orama_user_id";function P(t){let[e,...s]=t.split("\n"),r=s.join("\n").replace("data: ","");return{event:e.replace("event: ",""),data:r}}function O(t){return"object"==typeof t?JSON.stringify(t):`${t}`}(0,r.a)(P,"bt"),(0,r.a)(O,"ae");var L=class{static{(0,r.a)(this,"H")}messages;inferenceType;oramaClient;endpoint;abortController;events;userContext;conversationID;lastInteractionParams;state=[];systemPrompts;constructor(t){let e=t.oramaClient.answersApiBaseURL||"https://answer.api.orama.com";this.messages=t.initialMessages||[],this.inferenceType=t.inferenceType,this.oramaClient=t.oramaClient,this.endpoint=`${e}/v1/answer?api-key=${this.oramaClient.api_key}`,this.events=t.events,this.conversationID=(0,I.createId)(),this.userContext=t.userContext}async askStream(t){return this.messages.push({role:"user",content:t.term??""}),this.fetchAnswer(t)}async ask(t){let e=await this.askStream(t),s="";for await(let r of e)s=r;return this.events?.onMessageChange&&this.events.onMessageChange(this.messages),s}getMessages(){return this.messages}clearSession(){this.messages=[],this.state=[],this.events?.onMessageChange&&this.events.onMessageChange(this.messages),this.events?.onStateChange&&this.events.onStateChange(this.state)}abortAnswer(){if(!this.abortController)throw new Error("AbortController is not ready");this.abortController.abort(),this.abortController=void 0,this.state[this.state.length-1].aborted=!0}async regenerateLast({stream:t=!0}={}){if(0===this.state.length||0===this.messages.length)throw new Error("No messages to regenerate");if("assistant"!==this.messages.at(-1)?.role)throw new Error("Last message is not an assistant message");return this.messages.pop(),this.state.pop(),t?this.askStream(this.lastInteractionParams):this.ask(this.lastInteractionParams)}addNewEmptyAssistantMessage(){this.messages.push({role:"assistant",content:""})}async*fetchAnswer(t){this.abortController=new AbortController,this.lastInteractionParams=t;let e=(0,I.createId)(),s=null,r=this.state.length;this.state.push({interactionId:e,query:t.term??"",response:"",relatedQueries:null,sources:null,translatedQuery:null,segment:null,trigger:null,aborted:!1,loading:!0,error:!1,errorMessage:null});try{this.events?.onNewInteractionStarted&&this.events.onNewInteractionStarted(e),this.events?.onStateChange&&this.events.onStateChange(this.state);let n=new URLSearchParams;n.append("type",this.inferenceType),n.append("messages",JSON.stringify(this.messages)),n.append("query",t.term??""),n.append("conversationId",this.conversationID),n.append("userId",this.oramaClient.getUserId()),n.append("endpoint",this.oramaClient.endpoint),n.append("searchParams",JSON.stringify(t)),n.append("identity",this.oramaClient.getIdentity()??""),n.append("interactionId",e),n.append("alias",this.oramaClient.getAlias()??"");let a=this.getSystemPromptConfiguration();if(a&&n.append("systemPrompts",JSON.stringify(a)),this.userContext&&n.append("userContext",O(this.userContext)),t.userData&&n.append("userData",O(t.userData)),t.related){if(t.related?.howMany&&t.related?.howMany>5)throw new Error("Can generate at most 5 related queries");n.append("related",JSON.stringify({enabled:!0,howMany:t.related.howMany??3,format:t.related.format??"question"}))}let o=await fetch(this.endpoint,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString(),signal:this.abortController.signal});if(!o.ok||!o.body)throw new Error(o.statusText);s=o.body.getReader();let l=new TextDecoder,h=[],c="";this.events?.onMessageLoading&&this.events.onMessageLoading(!0),this.addNewEmptyAssistantMessage();let d=this.messages.at(-1);for(;;){let t,{value:e,done:n}=await s.read();if(n)break;for(c+=l.decode(e,{stream:!0});-1!==(t=c.indexOf("\n\n"));){let e=c.slice(0,t);c=c.slice(t+2);try{let t=P(e),s=JSON.parse(t.data);if("sources"===s.type)this.state[r].sources=s.message,this.events?.onSourceChange&&this.events.onSourceChange(s.message),this.events?.onStateChange&&this.events.onStateChange(this.state);else if("query-translated"===s.type)this.state[r].translatedQuery=s.message,this.events?.onQueryTranslated&&this.events.onQueryTranslated(s.message),this.events?.onStateChange&&this.events.onStateChange(this.state);else if("conversation-metadata"===s.type){let{segment:t,trigger:e}=s.message;t&&(this.state[r].segment=t),e&&(this.state[r].trigger=e),this.events?.onStateChange&&this.events.onStateChange(this.state)}else if("related-queries"===s.type)this.state[r].relatedQueries=s.message,this.events?.onRelatedQueries&&this.events.onRelatedQueries(s.message),this.events?.onStateChange&&this.events.onStateChange(this.state);else if("text"===s.type)for(h.push(s.message);h.length>0;)d.content+=h.shift(),this.state[r].response=d.content,this.events?.onStateChange&&this.events.onStateChange(this.state),this.events?.onMessageChange&&this.events.onMessageChange(this.messages),yield d.content}catch(i){console.error("Error parsing SSE event:",i),console.error("Raw message:",e)}}}}catch(n){if("AbortError"!==n.name)throw this.state[r].error=!0,this.state[r].errorMessage=n.message??"Unknown error",n;this.state[r].aborted=!0,this.events?.onAnswerAborted&&this.events.onAnswerAborted(!0)}finally{s?.releaseLock(),this.state[r].loading=!1,this.events?.onStateChange&&this.events.onStateChange(this.state),this.events?.onInteractionDone&&this.events.onInteractionDone(this.state[r]),this.events?.onMessageLoading&&this.events.onMessageLoading(!1)}}setSystemPromptConfiguration(t){if(Array.isArray(t.systemPrompts)){if(!t.systemPrompts.every((t=>"string"==typeof t)))throw new Error("Invalid system prompt configuration");this.systemPrompts=t.systemPrompts}return this}getSystemPromptConfiguration(){return this.systemPrompts}},U=class{static{(0,r.a)(this,"F")}cache;config;constructor(t){this.cache=new Map,this.config=t}set(t,e){this.cache.set(t,e)}get(t){return this.cache.get(t)}has(t){return this.cache.has(t)}delete(t){return this.cache.delete(t)}clear(){this.cache.clear()}size(){return this.cache.size}};function H(t,e){typeof navigator<"u"?typeof navigator.sendBeacon<"u"&&navigator.sendBeacon(t,e):fetch(t,{method:"POST",body:e,headers:{"Content-Type":"application/json"}}).then((()=>{}),(t=>console.log(t)))}(0,r.a)(H,"O");var B=class t{static{(0,r.a)(this,"t")}data;params;config;profile;constructor(t,e){this.data=[],this.config=t,this.profile=e}setParams(t){this.params=t}static create(e,s){let r=new t(e,s);return r.start(),r}add(t){this.data.push({rawSearchString:t.rawSearchString,query:t.query,resultsCount:t.resultsCount,roundTripTime:t.roundTripTime,searchedAt:t.searchedAt,userId:this.profile.getUserId(),identity:this.profile.getIdentity(),alias:this.profile.getAlias(),referer:typeof location<"u"?location.toString():void 0}),null!=this.params&&this.data.length>=this.config.flushSize&&this.flush()}flush(){if(null==this.params||0===this.data.length)return;let t=this.data;this.data=[];let e={source:"fe",deploymentID:this.params.deploymentID,index:this.params.index,oramaId:this.config.id,oramaVersion:E,userAgent:typeof navigator<"u"?navigator.userAgent:void 0,events:t};H(`${this.params.endpoint}?api-key=${this.config.api_key}`,JSON.stringify(e))?.catch((t=>console.log(t)))}start(){let t=setInterval(this.flush.bind(this),this.config.flushInterval);null!=t.unref&&t.unref()}},M=class{static{(0,r.a)(this,"V")}constructor(t){this.params=t}intervalId;start(){this.stop(),this.intervalId=setInterval(this.beat.bind(this),this.params.frequency)}stop(){void 0!==this.intervalId&&clearInterval(this.intervalId)}beat(){H(this.params.endpoint)?.catch((t=>console.log(t)))}},R=u(w(),1),N=class{static{(0,r.a)(this,"j")}endpoint;apiKey;userId;identity;userAlias;params;constructor({endpoint:t,apiKey:e}){if(!t||!e)throw new Error("Endpoint and API Key are required to create a Profile");if("string"!=typeof t||"string"!=typeof e)throw new Error("Endpoint and API Key must be strings");if(typeof localStorage<"u"){let t=localStorage.getItem(T);t?this.userId=t:(this.userId=(0,R.createId)(),localStorage.setItem(T,this.userId))}else this.userId=(0,R.createId)();this.endpoint=t,this.apiKey=e}setParams(t){let{protocol:e,host:s}=new URL(t.identifyUrl),r=`${e}//${s}/identify`;this.params={identifyUrl:r,index:t.index}}getIdentity(){return this.identity}getUserId(){return this.userId}getAlias(){return this.userAlias}async sendProfileData(t){if(!this.params)throw new Error("Orama Profile is not initialized");let e=JSON.stringify({...t,visitorId:this.getUserId(),index:this.params.index});await H(`${this.params?.identifyUrl}?api-key=${this.apiKey}`,e)}async identify(t,e){if("string"!=typeof e)throw new Error("Identity must be a string");await t,await this.sendProfileData({entity:"identity",id:e}),this.identity=e}async alias(t,e){if("string"!=typeof e)throw new Error("Identity must be a string");await t,await this.sendProfileData({entity:"alias",id:e}),this.userAlias=e}reset(){this.userId=(0,R.createId)(),this.identity=void 0,this.userAlias=void 0}};function j(t){return void 0!==t&&void 0!==t?.signal}(0,r.a)(j,"vn");var D=class{static{(0,r.a)(this,"It")}id=(0,b.createId)();api_key;endpoint;multiIndexSearch;mergeResults;multiIndexIndexes;answersApiBaseURL;collector;cache;profile;searchDebounceTimer;searchRequestCounter=0;blockSearchTillAuth=!1;heartbeat;initPromise;constructor(t){if("indexes"in t){this.api_key=t.indexes[0].api_key,this.multiIndexIndexes=t.indexes;let e=new URL(t.indexes[0].endpoint).origin;if(t.indexes.some((t=>new URL(t.endpoint).origin!==e)))throw new Error("All indexes must have the same endpoint origin");this.endpoint=e+"/v1/indexes",this.multiIndexSearch=!0,this.mergeResults=t.mergeResults??!0}else this.api_key=t.api_key,this.endpoint=t.endpoint,this.multiIndexSearch=!1,this.mergeResults=!0;if(this.answersApiBaseURL=t.answersApiBaseURL,this.profile=new N({endpoint:this.endpoint,apiKey:this.api_key}),!1!==t.telemetry){let e={id:this.id,api_key:this.api_key,flushInterval:t.telemetry?.flushInterval??5e3,flushSize:t.telemetry?.flushSize??25};this.collector=B.create(e,this.profile)}if(!1!==t.cache){let t={};this.cache=new U(t)}this.init()}customerUserToken=void 0;searchToken=void 0;setAuthToken(t){null===t?(this.customerUserToken=void 0,this.searchToken=void 0):(this.customerUserToken=t,this.searchToken=void 0),this.init()}onAuthTokenExpired;setOnAuthTokenExpired(t){this.onAuthTokenExpired=t}addSearchResultsToCollector(t,e,s,r){if(this.collector)if(Array.isArray(t))for(let i of t)this.collector.add({rawSearchString:s.term,resultsCount:i.hits?.length??0,roundTripTime:e,query:s,cached:r,searchedAt:new Date,userId:this.profile.getUserId()});else this.collector.add({rawSearchString:s.term,resultsCount:t?.hits?.length??0,roundTripTime:e,query:s,cached:r,searchedAt:new Date,userId:this.profile.getUserId()})}async search(t,e){if(await this.initPromise,this.blockSearchTillAuth)return console.warn("Search request blocked until user is authenticated"),null;let s,i=++this.searchRequestCounter,n=`search-${JSON.stringify(t)}`,a=null,o=!1,l=!0!==e?.fresh&&this.cache?.has(n),h=(0,r.a)((async()=>{try{let r=Date.now();a=this.multiIndexSearch?await this.fetch("multi_search","POST",{q:{...t,mergeResults:this.mergeResults},sst:this.searchToken,indexes:this.multiIndexIndexes},e?.abortController):await this.fetch("search","POST",{q:t,sst:this.searchToken},e?.abortController);let i=Date.now();s=i-r;let o=await C(BigInt(1e6*i-1e6*r));if(Array.isArray(a))for(let t of a)t.elapsed=o;else a.elapsed=o;this.cache?.set(n,a)}catch(r){if("AbortError"!==r.name)throw console.error("Search request failed",r),r}return this.addSearchResultsToCollector(a,s,t,o),a}),"h");return l&&this.cache?(s=0,a=this.cache.get(n),o=!0,this.addSearchResultsToCollector(a,s,t,o),i===this.searchRequestCounter?a:null):e?.debounce?new Promise(((t,s)=>{clearTimeout(this.searchDebounceTimer),this.searchDebounceTimer=setTimeout((async()=>{try{await h(),t(a)}catch(e){"AbortError"!==e.name&&(console.error("Search request failed",e),s(e))}}),e?.debounce||300),"unref"in this.searchDebounceTimer&&this.searchDebounceTimer.unref()})):h()}async vectorSearch(t,e){await this.initPromise;let s,r,i=`vectorSearch-${JSON.stringify(t)}`,n=!1;if(!0===(!0!==e?.fresh&&this.cache?.has(i))&&null!=this.cache)s=0,r=this.cache.get(i),n=!0;else{let n=Date.now();r=await this.fetch("vector-search2","POST",{q:t},e?.abortSignal??e?.abortController);let a=Date.now();r.elapsed=await C(BigInt(1e6*a-1e6*n)),s=a-n,this.cache?.set(i,r)}return null!=this.collector&&this.collector.add({rawSearchString:t.term,resultsCount:r.hits?.length??0,roundTripTime:s,query:t,cached:n,searchedAt:new Date,userId:this.profile.getUserId()}),r}createAnswerSession(t){return new L({inferenceType:t?.inferenceType||"documentation",initialMessages:t?.initialMessages||[],oramaClient:this,events:t?.events,userContext:t?.userContext,systemPrompts:t?.systemPrompts??[]})}startHeartBeat(t){this.heartbeat?.stop(),this.heartbeat=new M({...t,endpoint:`${this.endpoint}/health?api-key=${this.api_key}`}),this.heartbeat.start()}stopHeartBeat(){this.heartbeat?.stop()}async getPop(){return(await this.initPromise)?.pop??""}expirationTimer;init(){let t=["init","GET",void 0,void 0,{token:this.customerUserToken}];this.multiIndexSearch&&(t=["init_multi_search","POST",{indexes:this.multiIndexIndexes},void 0,{token:this.customerUserToken}]),this.initPromise=this.fetch(...t).then((t=>{if(this.collector?.setParams({endpoint:t.collectUrl,deploymentID:t.deploymentID,index:t.index}),this.profile?.setParams({identifyUrl:t.collectUrl,index:t.index}),t.searchSession)if("required"in t.searchSession&&!0===t.searchSession.required)this.blockSearchTillAuth=!0;else if("token"in t.searchSession){let e=t.searchSession.token;this.searchToken=e;let s=t.searchSession.maxAge;this.blockSearchTillAuth=!1,this.expirationTimer&&clearTimeout(this.expirationTimer),this.expirationTimer=setTimeout((()=>{this.searchToken===e&&(this.searchToken=void 0,this.blockSearchTillAuth=!0,this.onAuthTokenExpired?.(e))}),1e3*s),"unref"in this.expirationTimer&&this.expirationTimer.unref()}return t})).catch((t=>(console.log(t),null)))}async fetch(t,e,s,r,i){let n=j(r)?r?.signal:r;if(!0===n?.aborted)throw new Error("Request aborted");let a={method:e,headers:{"Content-Type":"application/x-www-form-urlencoded"},signal:n};if("POST"===e&&void 0!==s){let t=s;t.version=k,t.id=this.id,t.visitorId=this.profile.getUserId(),a.body=Object.entries(t).filter((([t,e])=>!!e)).map((([t,e])=>`${t}=${encodeURIComponent(JSON.stringify(e))}`)).join("&")}let o=new URL(`${this.endpoint}/${t}`);if(this.multiIndexSearch||o.searchParams.append("api-key",this.api_key),i)for(let[h,c]of Object.entries(i))c&&o.searchParams.append(h,c);let l=await fetch(o,a);if(!l.ok){let t=new Error;throw t.httpResponse=l,t}return await l.json()}getIdentity(){return this.profile.getIdentity()}getUserId(){return this.profile.getUserId()}getAlias(){return this.profile.getAlias()}async identify(t){if(void 0===this.initPromise)throw new Error("OramaClient not initialized");await this.profile.identify(this.initPromise,t)}async alias(t){if(void 0===this.initPromise)throw new Error("OramaClient not initialized");await this.profile.alias(this.initPromise,t)}reset(){this.profile.reset()}};function q(t,e,s="[focus-on-arrow-nav]"){if("ArrowDown"!==e.key&&"ArrowUp"!==e.key)return;e.stopPropagation(),e.preventDefault();let r=t.querySelectorAll(s),i=Array.from(r);i=i.filter((t=>-1!==t.tabIndex));let n,a=i[0],o=i[i.length-1],l=t.querySelector(":focus"),h=i.indexOf(l);"ArrowDown"===e.key?(n=h===i.length-1?a:i[h+1],n?.focus()):"ArrowUp"===e.key&&(n=0===h?o:i[h-1],n?.focus())}function z(t){var e;if(null!==(e=navigator.clipboard)&&void 0!==e&&e.writeText)navigator.clipboard.writeText(t).catch((t=>{console.error("Could not copy text: ",t)}));else{let e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}function V(t,e){return Array.from(t.attributes).reduce(((t,s)=>(e.includes(s.name)||(t[s.name]=s.value),t)),{})}function J(t,e,s){let r=`\n    Component: ${t.tagName.toLowerCase()}\n    Id: ${t.id}\n  `;if(!e&&!s)throw new Error(`Invalid component configuration. Please provide a valid index or instance prop. ${r}`);if(e&&(Array.isArray(e)?e:[e]).some((t=>!t.api_key||!t.endpoint)))throw new Error(`Invalid cloud index configuration. Please provide a valid api_key and endpoint ${r}`);e&&s&&console.warn(`Both index and instance props are provided. Instance prop will be used. ${r}`)}function K(t){if(Array.isArray(t)){return new D({mergeResults:!0,indexes:t})}let e=t;return new D({api_key:e.api_key,endpoint:e.endpoint})}function F(t){return`orama-ui-${t}-${Math.random().toString(36).substring(2,15)}`}function W(t,e,s){let r="system"===e?s:e;return t&&r&&(t.classList.remove("theme-light","theme-dark"),t.classList.add(`theme-${r}`)),r}function Q(t,e,s){var r;if(t&&s&&e)for(let i of Object.keys(s))if("colors"===i){if(null!==(r=s[i])&&void 0!==r&&r[e])for(let r of Object.keys(s[i][e]))t.style.setProperty(`${r}`,s[i][e][r])}else for(let e of Object.keys(s[i]))t.style.setProperty(`${e}`,s[i][e])}(0,r.a)(q,"arrowKeysNavigation"),(0,r.a)(z,"copyToClipboard"),(0,r.a)(V,"getNonExplicitAttributes"),(0,r.a)(J,"validateCloudIndexConfig"),(0,r.a)(K,"initOramaClient"),(0,r.a)(F,"generateRandomID"),(0,r.a)(W,"updateThemeClasses"),(0,r.a)(Q,"updateCssVariables");var X=["orama-search-box","orama-chat-box"];function Z(t){var e;let s=t;for(;;){if(!s)return null;if(s instanceof ShadowRoot){let t=s.host;if(X.includes(t.tagName.toLowerCase()))return t;s=t}else s=null!==(e=s.parentNode)&&void 0!==e?e:null}}(0,r.a)(Z,"getExternalComponentHTMLElement")},8453:(t,e,s)=>{s.d(e,{R:()=>a,x:()=>o});var r=s(6540);const i={},n=r.createContext(i);function a(t){const e=r.useContext(n);return r.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function o(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(i):t.components||i:a(t.components),r.createElement(n.Provider,{value:e},t.children)}}}]);